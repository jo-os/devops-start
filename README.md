# devops-start
Старт в DevOps (напоминалки)

**DevOps** (development + operations) - методология активного взаимодействия специалистов по разработке со специалистами по информационно-технологическому обслуживанию и взаимная интеграция их рабочих процессов друг в друга для обеспечения качества продукта. Предназначена для эффективной организации создания и обновления программных продуктов и услуг.

**Linux**
- бесплатно
- открытый исзодный код
- можно запустит на любом оборудовании
- инструменты для обеспечения надежности и безопасности

**Преимущества консоли**
- является частью ядра
- потребляет мало ресурсов
- позволяет автоматизировать действия
- универсальна

**Chmod** - работа с правами

chmod {u g o a} / {+ - =} / {r w x} filename

## Пользователи
/etc/passwd - имя пользователя : пароль : uid : gid : полное имя, комментарий : домашний каталог : shell

**useradd** username -b /home/username -c "Username Pupkin" -g usergroup -p password - надо все указать

**adduser** username - все создат и спросит сама

**usermod**
- -l - поменять имя пользователя
- -d - поменять домашнюю директорию
- -m -d - поменять дом директорию и создать если она не существует
- L - заблокировать или разблокировать пользователя

/etc/shadow - имя пользователя : пароль : последнее изменение пароля : минимальный возраст пароля : максимальный возраст пароля : период предупреждени : период бездействия : срок годности : неиспользованный

**passwd** username - смена пароля

**Флаги доступа**
- **SUID** - запуск файла с теми правами которые есть у владельца файла - chmod u+s file
- **SGID** - запуск файла с правами группы владельца - chmod g+s dir
- **Sticky-bit** - файл в директории может удалить только тот кто этот файл создал - chmod +t dir

/etc/group/ - имя группы : пароль группы : gid : пользователи входящие в группу

**usermod**
- -g - задать основную группу для пользователя
- -G - задать дополнительную группу
- -a - добавить группы для пользователя

**groupdel** group - если группа будет основной для пользователя, то ее не удалить

**userdel** username

## Пакеты
Программы для работы с пакетами
- внешняя база - apt-get, apt
- внутренняя база - apt-cache, dokg, apt

- dpkg -l - список всех установленных пакетов
- dpkg -s имя пакета - создатель пакета, доп информация по пакету 
- dpkg -L имя пакета - какие файлы в системе принадлежат определенному пакету
- dpkg -i soft.deb - установка пакета
- dpkg -r soft.deb - удаление пакета

- apt-cache pkgnames - покажет все доступные для установки пакеты
- apt-cache search programm - найдет версии программы
- apt-cache policy programm - покажет доступные версии
- apt-cache install programm=1.1 - установит указанную версию

/etc/apt/sources.list - список репозиториев

## Vim
Режимы работы
- командный режим (esc)
- режим командной строки (:)
- режим ввода (i, a)
- визуальный режим (v)

vim -R file - только просмотр, без сохранения

- h - j - k - l - перемещение
- w - начало следующего слова
- shift + a, i - переход в конец(a) или начало(i) и редактирование
- :set number - вывод номеров строк
- v - визуальный режим - + shift - выделит блок
- y - скопировать
- p - вставить
- u - отменить
- dd - удаление строки
- /word - поиск word в документе - n следующее совпадение, shift + n - предыдущее
- %s/moon/Moon/g - замена всех moon на Moon по всему файлу

**Консольные команды**

- find / -name "my.txt"
- find / -mtime +7 (modify time)
- find / -atime +3 (access time)
- find / -type d
- find / -type f
- find /home/me/test/ -name "*.jpg" -exec mv {} /home/me/pic/ \;

Директория это файл в котором содержится сопостовление имени файлы и его метаданные.

- ps auxf | grep soft | grep -v grep | tr -s " " | cut -f2 -d " " | xargs kill -9
- tr - режет все пробелы до одного
- cut - берет 2 позицию с разделителем " " (пробел)
- xargs - возмет вывод и передаст как аргумет

date +'%d-%m'

**Специальные параметры**
- $? - код возврата
- $* - все переданные позиционные параметры
- $# - количество переданных позиционных параметров

test -d /dir = [ -d /dir ]
```sh
#!/bin/bash
if [ $# -ne 2 ]
then
        echo "2 need"
        exit 1
fi
echo "its 2 good"
```
```
if [  ]
then ...
elif [  ]
then ...
else ...
fi
```
- read  -p "Please enter something: " line
- read -s -p "Password: " - скрывает введенные символы

**DNS**
- host yandex.ru
- traceroute yandex.ru
- dig +trace yandex.ru

**shell**
- alias
- alias lsa="ls -la"
- alias pss="ps aufx"

- jobs - вывод запущенных фоновых процессов
- Ctrl + Z - остановить запущенный процесс (если запустили и он забрал консоль)
- bg 2 - запустить процесс в фоне

- let a=3+5; echo $a
- expr 3 + 5
- echo $((5+5))
```
case "$переменная" in
"вариант1" ) команда ;;
"вариант2" ) команда;;
*) команда
esac
```
**Heredoc**
```
command << end
line1
line2
line3
end
```
```
for i in ya.ru google.com vk.com
do
        ping -c4 -q $i &> /dev/null && echo "$i is available!" || echo "$i is unreachable"
done
```
```
for i in ya.ru google.com; do ping -c3 -q $i; done
for i in $(ls /tmp/); do echo $i; done
for ((i=1;i<=10;i++; do echo "Hi!"; done))
for i in $(seq 1 10); do echo "Hi!"; done
```






